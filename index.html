// פונקציה חדשה לפיענוח תאריכים בעברית ולטיפול במבנה שגוי
function parseDateFromString(str) {
  if (!str) return null;
  const dateParts = str.trim().split(/[\/\-\.]/); // תומך בפורמטים DD/MM/YYYY או YYYY-MM-DD
  if (dateParts.length === 3) {
    if (dateParts[2].length === 4) {
      // DD/MM/YYYY
      return new Date(`${dateParts[2]}-${dateParts[1]}-${dateParts[0]}`);
    } else {
      // YYYY-MM-DD
      return new Date(str);
    }
  }
  const parsed = Date.parse(str);
  return isNaN(parsed) ? null : new Date(parsed);
}
